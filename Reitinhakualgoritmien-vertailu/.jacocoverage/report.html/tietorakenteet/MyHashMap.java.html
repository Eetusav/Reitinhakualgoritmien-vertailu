<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MyHashMap.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;Reitinhakualgoritmien-vertailu&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">tietorakenteet</a> &gt; <span class="el_source">MyHashMap.java</span></div><h1>MyHashMap.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package tietorakenteet;

//import java.util.Map;
import java.util.HashSet;

/**
 *
 * @author Matti
 */
public class MyHashMap&lt;Key, Value&gt; {

<span class="fc" id="L17">    private int BUCKET_COUNT = 100;</span>
<span class="fc" id="L18">    private int currentSize = 0;</span>

    private MyEntry&lt;Key, Value&gt;[] buckets;

<span class="fc" id="L22">    public MyHashMap() {</span>
<span class="fc" id="L23">        buckets = new MyEntry[BUCKET_COUNT];</span>
<span class="fc" id="L24">    }</span>

<span class="fc" id="L26">    public MyHashMap(int size) {</span>
<span class="fc" id="L27">        buckets = new MyEntry[size];</span>
<span class="fc" id="L28">    }</span>

    public Value get(Key solmu) {
<span class="fc" id="L31">        throwIfKeyIsNull(solmu);</span>
<span class="fc" id="L32">        MyEntry&lt;Key, Value&gt; entry = buckets[bucketIndexForKey(solmu)];</span>
<span class="fc bfc" id="L33" title="All 4 branches covered.">        while (entry != null &amp;&amp; !solmu.equals(entry.getKey())) {</span>
<span class="fc" id="L34">            entry = entry.getNext();</span>
        }
<span class="fc bfc" id="L36" title="All 2 branches covered.">        if (entry != null) {</span>
<span class="fc" id="L37">            return entry.getValue();</span>
        }
<span class="fc" id="L39">        return null;</span>
    }

    public void put(Key nimi, Value solmu) {
<span class="fc" id="L43">        throwIfKeyIsNull(nimi);</span>
<span class="fc" id="L44">        int bucketIndex = bucketIndexForKey(nimi);</span>
<span class="fc" id="L45">        MyEntry&lt;Key, Value&gt; entry = buckets[bucketIndex];</span>
<span class="fc bfc" id="L46" title="All 2 branches covered.">        if (entry != null) {</span>
<span class="fc" id="L47">            boolean lisatty = false;</span>
<span class="fc bfc" id="L48" title="All 2 branches covered.">            while (!lisatty) {</span>
<span class="fc bfc" id="L49" title="All 2 branches covered.">                if (nimi.equals(entry.getKey())) {</span>
<span class="fc" id="L50">                    entry.setValue(solmu);</span>
<span class="fc" id="L51">                    currentSize++;</span>
<span class="fc" id="L52">                    lisatty = true;</span>
<span class="pc bpc" id="L53" title="1 of 2 branches missed.">                } else if (entry.getNext() == null) {</span>
<span class="fc" id="L54">                    entry.setNext(new MyEntry&lt;Key, Value&gt;(nimi, solmu));</span>
<span class="fc" id="L55">                    currentSize++;</span>
<span class="fc" id="L56">                    lisatty = true;</span>
                }
<span class="fc" id="L58">                entry.getNext();</span>
            }
<span class="fc" id="L60">        } else {</span>
<span class="fc" id="L61">            buckets[bucketIndex] = new MyEntry&lt;Key, Value&gt;(nimi, solmu);</span>
        }
<span class="fc" id="L63">    }</span>

    public int bucketIndexForKey(Key solmu) {
<span class="fc" id="L66">        int bucketIndex = solmu.hashCode() % buckets.length;</span>
<span class="fc" id="L67">        return bucketIndex;</span>
    }

    private void throwIfKeyIsNull(Key solmu) {
<span class="fc bfc" id="L71" title="All 2 branches covered.">        if (solmu == null) {</span>
<span class="fc" id="L72">            throw new IllegalArgumentException(&quot;Solmu ei saa olla null&quot;);</span>
        }
<span class="fc" id="L74">    }</span>

//    public HashSet&lt;MyEntry&lt;Key, Value&gt;&gt; entrySet() {
//        HashSet&lt;MyEntry&lt;Key, Value&gt;&gt; set = new HashSet&lt;&gt;();
//        for (int i = 0; i &lt; buckets.length; i++) {
//            MyEntry&lt;Key, Value&gt; entry = buckets[i];
//            if (entry != null) {
//                set.add(entry);
//                while (entry.getNext() != null) {
//                    entry = entry.getNext();
//                    set.add(entry);
//                }
//            }
//        }
//        return set;
//    }
    public MyEntry&lt;Key, Value&gt;[] entrySet() {
        MyEntry&lt;Key, Value&gt;[] pal;
        // TODO: sizing problem
<span class="fc" id="L93">        pal = new MyEntry[1024 + currentSize];</span>
//        System.out.println(currentSize);
<span class="fc" id="L95">        int toIndex = 0;</span>
<span class="fc bfc" id="L96" title="All 2 branches covered.">        for (int i = 0; i &lt; buckets.length; i++) {</span>
<span class="fc" id="L97">            MyEntry s = buckets[i];</span>
<span class="fc bfc" id="L98" title="All 2 branches covered.">            if (s != null) {</span>
<span class="fc" id="L99">                pal[toIndex] = s;</span>
<span class="fc" id="L100">                toIndex++;</span>
<span class="fc bfc" id="L101" title="All 2 branches covered.">                while (s.getNext() != null) {</span>
<span class="fc" id="L102">                    s=s.getNext();</span>
<span class="fc" id="L103">                    pal[toIndex] = s;</span>
<span class="fc" id="L104">                    toIndex++;</span>
                }
            }
        }
<span class="fc" id="L108">        MyEntry&lt;Key,Value&gt;[] pal2 = new MyEntry[toIndex];</span>
<span class="fc bfc" id="L109" title="All 2 branches covered.">        for (int j = 0; j &lt; toIndex; j++) {</span>
<span class="fc" id="L110">            pal2[j] = pal[j];</span>
        }
<span class="fc" id="L112">        return pal2;</span>
    }
    public int size(){
<span class="fc" id="L115">        return this.buckets.length;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>